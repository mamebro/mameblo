$(function() {
  function xmas() {
    $('.entry').each(function () {
      if ($(this).text().replace(/(\r\n|\s+)/g, '').match(/(xmas|Xmas|XMAS|christmas|Christmas|CHRISTMAS|クリスマス|サンタ|トナカイ)/)) {
        $(this).addClass('xmas');
      }
    });
  }
  xmas();

  $('.autopager-content').infinitescroll( {
    loading: {
      msg: null,
      msgText: '',
      img: "<%= asset_path('loading.gif') %>",
      finishedMsg: null
    },
    navSelector: '.autopager-nav',
    nextSelector: '.autopager-next',
    itemSelector: '.autopager-item',
    bufferPx: 1000,
    prefill: true
  }, function() {
    emojify.run();
    xmas();
  });
});
